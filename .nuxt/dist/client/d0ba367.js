(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{193:function(t,e,n){"use strict";n.d(e,"f",(function(){return c})),n.d(e,"g",(function(){return o})),n.d(e,"e",(function(){return l})),n.d(e,"a",(function(){return f})),n.d(e,"c",(function(){return v})),n.d(e,"i",(function(){return h})),n.d(e,"d",(function(){return d})),n.d(e,"b",(function(){return m})),n.d(e,"h",(function(){return _}));var r=n(63),c=function(t){return Object(r.b)({method:"GET",url:"/api/articles",params:t})},o=function(t){return Object(r.b)({method:"GET",url:"/api/articles/feed",params:t})},l=function(t){return Object(r.b)({method:"GET",url:"/api/articles/".concat(t)})},f=function(data){return Object(r.b)({method:"POST",url:"/api/articles",data:data})},v=function(t){return Object(r.b)({method:"POST",url:"/api/articles/".concat(t,"/favorite")})},h=function(t){return Object(r.b)({method:"DELETE",url:"/api/articles/".concat(t,"/favorite")})},d=function(t){return Object(r.b)({method:"GET",url:"/api/articles/".concat(t,"/comments")})},m=function(t,data){return Object(r.b)({method:"POST",url:"/api/articles/".concat(t,"/comments"),data:data})},_=function(t,e){return Object(r.b)({method:"DELETE",url:"/api/articles/".concat(t,"/comments/").concat(e)})}},264:function(t,e,n){"use strict";n.r(e);n(37),n(23),n(49),n(50);var r=n(4),c=n(21),article=(n(24),n(36),n(193)),o=n(63),l=n(48);function f(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var v={name:"home",data:function(){return{articles:[],articlesTotal:0,limit:10,page:1,tags:[],tag:"",tab:this.user?"YOUR_FEED":"GLOBAL_FEED"}},fetch:function(){this.searchArticleList(),this.getTags()},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({totalPage:function(){return Math.ceil(this.articlesTotal/this.limit)}},Object(l.b)(["user"])),methods:{searchArticleList:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.user&&"YOUR_FEED"===t.tab?article.g:article.f,e.next=3,n({limit:t.limit,offset:(t.page-1)*t.limit,tag:t.tag});case 3:r=e.sent,data=r.data,t.articles=data.articles,t.articlesTotal=data.articlesCount;case 7:case"end":return e.stop()}}),e)})))()},getTags:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r=void 0,Object(o.b)({method:"GET",url:"/api/tags",params:r});case 2:n=e.sent,data=n.data,t.tags=data.tags.filter((function(t){return t}));case 5:case"end":return e.stop()}var r}),e)})))()},changePage:function(t){this.page=t,this.searchArticleList()},selectTag:function(t){this.tag=t,this.tab="TAG_FEED",this.initPage(),this.searchArticleList()},changeTab:function(t){this.tab=t,"TAG_FEED"!==this.tab&&(this.tag=""),this.initPage(),this.searchArticleList()},initPage:function(){this.page=1},favourite:function(t){t.favorited?(Object(article.i)(t.slug),t.favorited=!1,t.favoritesCount+=-1):(Object(article.c)(t.slug),t.favorited=!0,t.favoritesCount+=1),this.searchArticleList()}}},h=n(30),component=Object(h.a)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home-page"},[t._m(0),t._v(" "),n("div",{staticClass:"container page"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-9"},[n("div",{staticClass:"feed-toggle"},[n("ul",{staticClass:"nav nav-pills outline-active"},[t.user?n("li",{staticClass:"nav-item"},[n("a",{staticClass:"nav-link",class:{active:"YOUR_FEED"===t.tab},on:{click:function(e){return t.changeTab("YOUR_FEED")}}},[t._v("Your Feed")])]):t._e(),t._v(" "),n("li",{staticClass:"nav-item"},[n("a",{staticClass:"nav-link",class:{active:"GLOBAL_FEED"===t.tab},on:{click:function(e){return t.changeTab("GLOBAL_FEED")}}},[t._v("Global Feed")])]),t._v(" "),t.tag?n("li",{staticClass:"nav-item"},[n("a",{staticClass:"nav-link",class:{active:"TAG_FEED"===t.tab},on:{click:function(e){return t.changeTab("TAG_FEED")}}},[t._v("#"+t._s(t.tag))])]):t._e()])]),t._v(" "),n("div",{staticStyle:{"max-height":"calc(100vh - 200px)",width:"100%",overflow:"auto"}},t._l(t.articles,(function(article){return n("div",{key:article.slug,staticClass:"article-preview"},[n("div",{staticClass:"article-meta"},[n("nuxt-link",{attrs:{to:{name:"profile",params:{username:article.author.username}}}},[n("img",{attrs:{src:article.author.image}})]),t._v(" "),n("div",{staticClass:"info"},[n("nuxt-link",{staticClass:"author",attrs:{to:{name:"profile",params:{username:article.author.username}}}},[t._v("\n                    "+t._s(article.author.username)+"\n                  ")]),t._v(" "),n("span",{staticClass:"date"},[t._v(t._s(t._f("date")(article.createdAt)))])],1),t._v(" "),n("button",{staticClass:"btn btn-outline-primary btn-sm pull-xs-right",class:{active:article.favorited},on:{click:function(e){return t.favourite(article)}}},[n("i",{staticClass:"ion-heart"}),t._v(" "+t._s(article.favoritesCount)+"\n                ")])],1),t._v(" "),n("nuxt-link",{staticClass:"preview-link",attrs:{to:{name:"article",params:{slug:article.slug}}}},[n("h1",[t._v(t._s(article.title))]),t._v(" "),n("p",[t._v(t._s(article.description))]),t._v(" "),n("span",[t._v("Read more...")])])],1)})),0),t._v(" "),n("nav",[n("ul",{staticClass:"pagination"},t._l(t.totalPage,(function(e){return n("li",{key:e,staticClass:"page-item",class:{active:e===t.page}},[n("a",{staticClass:"page-link",on:{click:function(n){return t.changePage(e)}}},[t._v(t._s(e))])])})),0)])]),t._v(" "),n("div",{staticClass:"col-md-3"},[n("div",{staticClass:"sidebar"},[n("p",[t._v("Popular Tags")]),t._v(" "),n("div",{staticClass:"tag-list"},t._l(t.tags,(function(e){return n("a",{key:e,staticClass:"tag-pill tag-default",on:{click:function(n){return t.selectTag(e)}}},[t._v(t._s(e))])})),0)])])])])])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"banner"},[n("div",{staticClass:"container"},[n("h1",{staticClass:"logo-font"},[t._v("过客")]),t._v(" "),n("p",[t._v("A place to share your knowledge.")])])])}],!1,null,"3969cdbf",null);e.default=component.exports}}]);